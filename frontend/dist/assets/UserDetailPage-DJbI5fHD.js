import{b as f,r as l,a as j,j as e}from"./index-Cg-pIFFT.js";function w(){const{id:i}=f(),d=localStorage.getItem("token"),[r,m]=l.useState(null),[n,h]=l.useState([]),[y,p]=l.useState([]),[c,o]=l.useState(null),[x,b]=l.useState(null);if(l.useEffect(()=>{j.get("https://hoodshop-project.onrender.com/api/config/shipping-prices").then(t=>{const s=(t.data||[]).map(a=>({name:a.name,price:parseFloat(a.price)}));p(s)}).catch(t=>console.error("Chyba pri načítaní cien dopravy:",t))},[]),l.useEffect(()=>{if(!d){o("Missing token – you are not logged in");return}fetch(`https://hoodshop-project.onrender.com
/user/admin/user/${i}`,{headers:{Authorization:`Bearer ${d}`}}).then(t=>{if(!t.ok)throw new Error("Failed to load user data");return t.json()}).then(m).catch(t=>o(t.message))},[i,d]),l.useEffect(()=>{d&&fetch(`https://hoodshop-project.onrender.com
/api/order-history/history/${i}`,{headers:{Authorization:`Bearer ${d}`}}).then(t=>{if(!t.ok)throw new Error("Failed to load orders");return t.json()}).then(h).catch(t=>b(t.message))},[i,d]),c)return e.jsx("p",{className:"text-red-500 text-center",children:c});if(!r)return e.jsx("p",{className:"text-white text-center",children:"Loading user data..."});const u=n.length,g=n.reduce((t,s)=>t+parseFloat(s.total_price||0),0);return e.jsxs("div",{className:"relative min-h-screen text-white flex flex-col items-center bg-fixed bg-cover bg-no-repeat bg-center",style:{backgroundImage:"url('/img/bg-profile-1.jpg')"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-30 z-0"}),e.jsxs("div",{className:"relative z-10 w-full md:px-6 pb-12 space-y-10",children:[e.jsx("div",{className:"py-8 text-center bg-black w-full",children:e.jsxs("h1",{className:"text-2xl lg:text-4xl font-bold text-white",children:["User Details for ",e.jsx("span",{className:"text-blue-200",children:r.name})]})}),e.jsxs("div",{className:"max-w-2xl mx-auto bg-black bg-opacity-80 p-8 md:rounded-2xl shadow-2xl border-2 border-gray-600 space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-200 border-b border-gray-600 pb-2 text-center",children:"User Information"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-100 text-sm sm:text-base",children:[["Email",r.email],["Address",r.address||"-"],["Profile email",r.profile_email],["City",r.city||"-"],["Date of birth",r.birth_date?new Date(r.birth_date).toLocaleDateString("sk-SK"):"-"],["Postal code",r.postal_code||"-"],["Phone",r.mobile_number||"-"]].map(([t,s])=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-800 bg-opacity-50 p-3 rounded-lg border border-gray-600",children:[e.jsxs("span",{className:"text-blue-300 font-medium",children:[t,":"]}),e.jsx("span",{className:"text-right",children:s})]},t))}),e.jsxs("div",{className:"mt-4 text-center space-y-2 text-base sm:text-lg",children:[e.jsxs("p",{className:"text-blue-300 font-semibold",children:["Total orders:"," ",e.jsx("span",{className:"text-white",children:u})]}),e.jsxs("p",{className:"font-semibold",children:["Total spent:"," ",e.jsxs("span",{className:"text-green-400 font-bold text-xl",children:[g.toFixed(2)," €"]})]})]})]}),e.jsxs("div",{className:"max-w-7xl mx-auto bg-black bg-opacity-80 p-6 sm:p-8 lg:px-24 md:rounded-xl shadow-lg border-2 border-gray-600 mt-10",children:[e.jsx("h2",{className:"text-2xl font-bold text-blue-200  pb-3 text-center",children:"Orders"}),x&&e.jsx("p",{className:"text-red-500 text-center mb-6 font-semibold",children:x}),n.length===0?e.jsx("p",{className:"text-red-500 text-lg text-center font-medium",children:"This user has no orders."}):
(t=>e.jsxs("div",{className:"border-2 border-gray-600 rounded-lg p-6 bg-gray-900 shadow-md hover:shadow-blue-600 transition-shadow duration-300 mb-12",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start mb-8 gap-5",children:[e.jsxs("div",{className:"text-sm md:text-base font-semibold text-blue-300 whitespace-nowrap",children:[new Date(t.created_at).toLocaleDateString("sk-SK")," ",new Date(t.created_at).toLocaleTimeString("sk-SK",{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex flex-col items-center flex-grow px-4",children:[e.jsxs("div",{className:"text-xl md:text-2xl font-bold text-blue-500 text-center mb-6 tracking-wide",children:["Order No."," ",e.jsx("span",{className:"text-blue-200",children:t.order_number})]}),e.jsxs("div",{className:`\r
                        w-full flex flex-col md:flex-row justify-center items-start md:items-center md:space-x-12 space-y-4 md:space-y-0 px-4`,children:[e.jsx("div",{className:"flex flex-col space-y-2 text-left w-full md:w-auto",children:[["Full Name",t.full_name],["Email",t.profile_email],["Mobile Number",t.mobile_number]].map(([s,a])=>e.jsxs("div",{className:"w-full md:min-w-[150px]",children:[e.jsxs("span",{className:"font-semibold text-blue-300",children:[s,":"]})," ",a]},s))}),e.jsx("div",{className:"flex flex-col space-y-2 text-left w-full md:w-auto",children:[["Address",t.address],["City",t.city],["Postal Code",t.postal_code]].map(([s,a])=>e.jsxs("div",{className:"w-full md:min-w-[150px]",children:[e.jsxs("span",{className:"font-semibold text-blue-300",children:[s,":"]})," ",a]},s))})]})]})]}),e.jsxs("div",{children:[e.jsxs("table",{className:"hidden md:table w-full text-sm text-left text-gray-200 border border-gray-700 rounded-md mb-6",children:[e.jsx("thead",{className:"bg-gray-800 text-blue-400 uppercase text-xs sm:text-sm tracking-wide",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 border border-gray-600",children:"Product"}),e.jsx("th",{className:"px-4 py-3 border border-gray-600 text-center",children:"Quantity"}),e.jsx("th",{className:"px-4 py-3 border border-gray-600 text-right",children:"Price"})]})}),e.jsx("tbody",{children:t.items.map((s,a)=>e.jsxs("tr",{className:`border border-gray-700 ${a%2===0?"bg-gray-800":"bg-gray-900"}`,children:[e.jsxs("td",{className:"px-4 py-2 border border-gray-600 max-w-xs truncate",children:[s.product_name," - ",s.price," €"]}),e.jsx("td",{className:"px-4 py-2 border border-gray-600 text-center",children:s.quantity}),e.jsxs("td",{className:"px-4 py-2 border border-gray-600 text-right",children:[(s.price*s.quantity).toFixed(2)," €"]})]},a))})]}),e.jsx("div",{className:"md:hidden space-y-5",children:t.items.map((s,a)=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 shadow-inner border border-gray-700",children:[e.jsx("div",{className:"text-blue-400 font-semibold mb-2",children:"Product"}),e.jsxs("div",{className:"mb-3 text-gray-200 truncate",children:[s.product_name," - ",s.price," €"]}),e.jsx("div",{className:"text-blue-400 font-semibold mb-2",children:"Quantity"}),e.jsx("div",{className:"mb-3 text-gray-200",children:s.quantity}),e.jsx("div",{className:"text-blue-400 font-semibold mb-2",children:"Price"}),e.jsxs("div",{className:"text-gray-200",children:[(s.price*s.quantity).toFixed(2)," €"]})]},a))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mt-8 text-gray-300 text-sm gap-5 sm:gap-0",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-blue-400 text-sm",children:"Delivery:"})," ",t.delivery_method||"Unknown"," —"," ",e.jsxs("span",{className:"text-green-500 font-bold",children:[(parseFloat(t.delivery_price)||0).toFixed(2)," €"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-blue-400 text-sm",children:"Used Points:"})," ",t.used_points??0,e.jsxs("span",{className:"text-red-700 md:text-lg lg:text-xl font-semibold",children:[" -",((t.used_points??0)/10).toFixed(2)," €"]})]})]}),e.jsxs("div",{className:"text-green-500 font-extrabold text-lg sm:text-xl text-right whitespace-nowrap",children:["Total: ",t.total_price," €"]})]})]},t.id))]})]})]})}export{w as default};

