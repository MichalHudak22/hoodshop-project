import{r as l,u as R,j as e,a as _}from"./index-A0Sm30pc.js";function z(){var g;const[a,u]=l.useState([]),[n,h]=l.useState(null),[p,i]=l.useState(!1),[f,m]=l.useState(null),[y,j]=l.useState(""),[r,d]=l.useState(!1),N=localStorage.getItem("token"),w=R(),k=()=>{if(!N){m("Nie ste prihl√°sen√Ω");return}fetch("http://localhost:3001/user",{headers:{Authorization:`Bearer ${N}`}}).then(t=>{if(!t.ok)throw new Error("Nepodarilo sa naƒç√≠ta≈• pou≈æ√≠vateƒæov");return t.json()}).then(t=>{u(t),m(null)}).catch(t=>m(t.message))};l.useEffect(()=>{k()},[]);const o=()=>{n&&d(!0)},s=()=>{if(n){if(!N){m("Nie ste prihl√°sen√Ω");return}i(!0),m(null),fetch(`http://localhost:3001/user/admin/user/${n}`,{method:"DELETE",headers:{Authorization:`Bearer ${N}`}}).then(async t=>{if(!t.ok){const b=await t.json().catch(()=>null);throw new Error((b==null?void 0:b.error)||"Error deleting user")}return t.json()}).then(()=>{i(!1),h(null),d(!1),k()}).catch(t=>{i(!1),m(t.message),d(!1)})}},c=()=>{n&&w(`/admin/user/${n}`)},T=(t,b)=>{const E=b==="admin"?"user":"admin";if(!N){m("Nie ste prihl√°sen√Ω");return}i(!0),m(null),fetch(`http://localhost:3001/user/admin/user/${t}/role`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${N}`},body:JSON.stringify({role:E})}).then(v=>v.ok?v.json():v.json().then(C=>{throw new Error(C.error||"Chyba pri zmene roly")})).then(()=>{i(!1),k()}).catch(v=>{i(!1),m(v.message)})},x=a.filter(t=>t.email.toLowerCase().includes(y.toLowerCase())),S=a.filter(t=>t.role==="admin").length,P=a.filter(t=>t.role==="user").length,A=a.find(t=>t.id===n);return e.jsxs("div",{className:"",children:[f&&e.jsx("p",{className:"text-red-500 mb-4 text-center",role:"alert",children:f}),e.jsxs("div",{className:"max-w-3xl mx-auto mb-4 text-center",children:[e.jsxs("p",{className:"text-white font-semibold text-lg lg:text-xl",children:["Registered users:"," ",e.jsx("span",{className:"text-yellow-400",children:a.length})," ",e.jsxs("span",{className:"hidden md:inline",children:["(Admins:"," ",e.jsx("span",{className:"text-yellow-400",children:S}),", Users:"," ",e.jsx("span",{className:"text-yellow-400",children:P}),")"]})]}),e.jsxs("p",{className:"text-white font-semibold text-lg lg:text-xl md:hidden",children:["(Admins:"," ",e.jsx("span",{className:"text-yellow-400",children:S}),", Users:"," ",e.jsx("span",{className:"text-yellow-400",children:P}),")"]})]}),e.jsxs("p",{className:"text-left lg:text-center text-sm md:text-[16px] lg:text-lg text-blue-100 mb-5 max-w-3xl m-auto",children:["Choose a user from the list. Click ",e.jsx("strong",{className:"text-gray-100",children:"Select"})," to see their profile and orders, use ",e.jsx("strong",{className:"text-white",children:"Set as Admin"})," to change their permissions, or click ",e.jsx("strong",{className:"text-white",children:"Delete"})," to remove the user from the system."]}),e.jsx("div",{className:"mb-7 max-w-md mx-auto",children:e.jsx("input",{type:"text",placeholder:"Search user by email...",value:y,onChange:t=>j(t.target.value),className:"w-full px-4 py-2 rounded-lg bg-gray-900 text-white text-center placeholder-gray-400 border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-300"})}),e.jsx("div",{className:"max-w-3xl min-h-[500px] mx-auto max-h-[500px] overflow-y-scroll scrollbar scrollbar-thumb-gray-500 scrollbar-track-gray-800 rounded-lg",children:e.jsx("ul",{className:"space-y-3 px-3",children:x.length===0?e.jsx("p",{className:"text-center text-lg text-red-500",children:"No users found."}):x.map(t=>e.jsxs("li",{onClick:()=>h(t.id),className:`cursor-pointer bg-gray-800 hover:bg-gray-900 p-4 rounded-lg shadow border-2 ${n===t.id?"border-blue-400 bg-gray-900":"border-blue-100"}`,children:[e.jsx("p",{className:"text-lg font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-gray-300",children:t.email}),e.jsxs("p",{className:"text-sm text-white",children:["Role:"," ",e.jsx("span",{className:t.role==="admin"?"text-green-500 font-semibold":"text-gray-400",children:t.role})]})]},t.id))})}),e.jsxs("div",{className:"max-w-3xl mx-auto mt-6 flex justify-center items-center gap-3 md:gap-5",children:[e.jsx("button",{onClick:c,disabled:!n,className:"w-[80px] md:w-[140px] text-center bg-green-700 hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed text-white py-2 px-4 text-sm md:text-lg rounded-lg transition",children:"Select"}),e.jsx("button",{onClick:()=>{if(!n)return;const t=a.find(b=>b.id===n);t&&T(t.id,t.role)},disabled:!n||p,className:"w-[120px] md:w-[165px] text-center bg-blue-700 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white py-2 px-4 text-sm md:text-lg rounded-lg transition",children:n&&((g=a.find(t=>t.id===n))==null?void 0:g.role)==="admin"?"Set as User":"Set as Admin"}),e.jsx("button",{onClick:o,disabled:!n||p,className:"w-[80px] md:w-[140px] text-center bg-red-700 hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed text-white py-2 px-4 text-sm md:text-lg rounded-lg transition",children:p?"Ma≈æem...":"Delete"})]}),r&&A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg max-w-md w-full text-center",children:[e.jsxs("p",{className:"mb-4 text-white text-lg",children:["Are you sure you want to delete the user ",e.jsx("span",{className:"font-bold",children:A.name}),"?"]}),e.jsxs("div",{className:"flex justify-center gap-6",children:[e.jsx("button",{onClick:s,disabled:p,className:"bg-red-700 hover:bg-red-600 text-white px-6 py-2 rounded-lg transition",children:"Yes"}),e.jsx("button",{onClick:()=>d(!1),disabled:p,className:"bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg transition",children:"No"})]})]})})]})}function B(){const[a,u]=l.useState({totalOrders:0,totalRevenue:0,totalUsedPoints:0}),[n,h]=l.useState([]),[p,i]=l.useState(!0),[f,m]=l.useState(null),y=localStorage.getItem("token");if(l.useEffect(()=>{(async()=>{try{const[d,N]=await Promise.all([_.get("/api/orders/summary",{headers:{Authorization:`Bearer ${y}`}}),_.get("/api/orders/top-products",{headers:{Authorization:`Bearer ${y}`}})]);u(d.data),h(N.data)}catch(d){m("Nepodarilo sa naƒç√≠ta≈• sum√°r objedn√°vok alebo rebr√≠ƒçek produktov."),console.error(d)}finally{i(!1)}})()},[y]),p)return e.jsx("p",{children:"Naƒç√≠tavam sum√°r objedn√°vok..."});if(f)return e.jsx("p",{className:"text-red-500",children:f});const j=r=>(r/10).toFixed(2);return e.jsxs("div",{className:"p-2 max-w-md mx-auto rounded-lg shadow-lg text-blue-300",children:[e.jsx("h3",{className:"text-xl md:text-2xl lg:text-3xl font-semibold mb-5 text-center text-blue-200",children:"Orders Summary"}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center bg-gray-700 text-lg bg-opacity-50 rounded-md p-3",children:[e.jsx("span",{children:"Total number of orders:"}),e.jsx("span",{className:"font-semibold bg-yellow-400 text-black text-3xl lg:text-4xl p-2 rounded-lg",children:a.totalOrders})]}),e.jsxs("div",{className:"flex flex-col bg-gray-700 text-lg bg-opacity-50 rounded-md p-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total loyalty points used:"}),e.jsx("span",{className:"font-semibold text-yellow-400 text-lg",children:a.totalUsedPoints.toLocaleString("sk-SK")})]}),e.jsxs("div",{className:"flex justify-between mt-1 text-[15px] italic",children:[e.jsx("span",{children:"Value in euros (10 points = 1 ‚Ç¨):"}),e.jsxs("span",{className:"text-yellow-400",children:[j(a.totalUsedPoints)," ‚Ç¨"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-gray-700 bg-opacity-50 text-lg rounded-md p-3",children:[e.jsx("span",{children:"Total revenue:"}),e.jsxs("span",{className:"font-bold bg-green-400 text-black p-2 rounded-lg text-2xl lg:text-3xl 2xl:text-4xl",children:[a.totalRevenue.toLocaleString("sk-SK")," ‚Ç¨"]})]}),e.jsxs("div",{className:"bg-gray-800 bg-opacity-70 p-4 rounded-md mt-4",children:[e.jsx("h4",{className:"text-lg font-semibold mb-2 text-center text-blue-200",children:"Top 10 Best-Selling Products"}),n.length===0?e.jsx("p",{className:"text-sm text-gray-400",children:"≈Ωiadne d√°ta o predajoch."}):e.jsx("ul",{className:"space-y-1 text-base text-yellow-300",children:n.map((r,d)=>e.jsxs("li",{className:"flex justify-between",children:[e.jsxs("span",{className:"font-medium text-white",children:[d+1,". ",r.name]}),e.jsxs("span",{children:[r.quantity," ks"]})]},d))})]})]})]})}const H=["DPD","GLS","Slovak Post"];function q(){const[a,u]=l.useState({}),[n,h]=l.useState(!0),[p,i]=l.useState(null),[f,m]=l.useState(new Set),[y,j]=l.useState(null),[r,d]=l.useState("");l.useEffect(()=>{async function o(){try{const s=await _.get("/api/config/shipping-prices");if(Array.isArray(s.data)){const c={};s.data.forEach(({name:T,price:x})=>{c[T]=x!=null?x.toString():""}),u(c)}else i("Oƒçak√°val som pole s cenami dopravy")}catch(s){i("Chyba pri naƒç√≠tan√≠ cien dopravy"),console.error(s)}finally{h(!1)}}o()},[]);const N=(o,s)=>{(s===""||/^\d{0,3}(\.\d{0,2})?$/.test(s)&&parseFloat(s)<=999.99)&&(u(c=>({...c,[o]:s})),m(c=>new Set(c).add(o)))},w=(o,s="info")=>{j(o),d(s),setTimeout(()=>{j(null)},3e3)},k=async o=>{o.preventDefault(),i(null);const s=Array.from(f);if(s.length===0){w("No prices have been changed.","info");return}try{await Promise.all(s.map(c=>_.post("/api/config/shipping-prices",{name:c,price:a[c]===""?0:parseFloat(a[c])}))),m(new Set),w("Delivery prices have been saved.","success")}catch(c){i("Chyba pri ukladan√≠ cien dopravy"),console.error(c)}};return n?e.jsx("p",{children:"Naƒç√≠tavam ceny dopravy..."}):p?e.jsx("p",{className:"text-red-600",children:p}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl md:text-2xl lg:text-3xl font-semibold my-3 text-center text-blue-200",children:"Set Delivery Prices"}),e.jsxs("form",{onSubmit:k,className:"max-w-sm mx-auto p-4",children:[H.map(o=>e.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[e.jsxs("label",{htmlFor:o,className:"font-bold text-gray-100 w-28 text-right",children:[o,":"]}),e.jsx("input",{id:o,type:"text",value:a[o]??"",onChange:s=>N(o,s.target.value),className:"flex-1 p-1.5 text-gray-900 max-w-[100px] bg-white border border-gray-300 rounded text-base focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",inputMode:"decimal",pattern:"^\\d*\\.?\\d{0,2}$"})]},o)),e.jsxs("div",{className:"flex justify-center mt-6 flex-col items-center",children:[e.jsx("button",{type:"submit",className:"w-[190px] text-center bg-green-700 hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed text-white py-2 px-4 text-sm md:text-lg rounded-lg transition",children:"Save delivery prices"}),e.jsx("div",{className:"h-6 mt-2",children:y&&e.jsx("p",{className:`text-sm transition-opacity duration-300 ${r==="success"?"text-green-400":"text-yellow-300"}`,children:y})})]})]})]})}const U=({sectionKey:a="football-home-header",onChange:u,initialText:n={title:"",paragraph:""}})=>{const[h,p]=l.useState(n.title||""),[i,f]=l.useState(n.paragraph||""),[m,y]=l.useState("#000000"),[j,r]=l.useState(""),[d,N]=l.useState(""),w=l.useRef(null),k=l.useRef(null);l.useEffect(()=>{if(!a)return;(async()=>{try{const b=(await _.get(`http://localhost:3001/api/config/section/${a}`)).data||{};p(b.title||""),f(b.paragraph||""),u&&u({title:b.title||"",paragraph:b.paragraph||""})}catch(t){console.error("Chyba pri naƒç√≠tan√≠ d√°t z backendu:",t)}})()},[a,u]);const o=(g,t,b,E)=>{const v=b.current;if(!v)return;const C=v.selectionStart,D=v.selectionEnd;if(C===D)return;const L=g.substring(0,C),F=g.substring(C,D),M=g.substring(D),$=`${L}[color=${m}]${F}[/color]${M}`;t($),setTimeout(()=>{const O=C+`[color=${m}]`.length+F.length+8;v.selectionStart=v.selectionEnd=O,v.focus()},0),u&&u(E?{title:$,paragraph:i}:{title:h,paragraph:$})},s=100,c=300,T=g=>{const t=g.target.value;t.length<=s&&(p(t),u&&u({title:t,paragraph:i}))},x=g=>{const t=g.target.value;t.length<=c&&(f(t),u&&u({title:h,paragraph:t}))},S=async()=>{if(!h.trim()||!i.trim()){r("Both fields must be filled!"),N("error"),P();return}try{await _.post("http://localhost:3001/api/config/section",{section_key:a,title:h,paragraph:i}),r("Text was successfully saved."),N("success")}catch(g){r("Error saving the text."),N("error"),console.error(g)}finally{P()}},P=()=>{setTimeout(()=>{r(""),N("")},3e3)},A=g=>{const t=/\[color=(#[0-9a-fA-F]{6}|[a-zA-Z]+)\](.*?)\[\/color\]/g,b=[];let E=0,v;for(;(v=t.exec(g))!==null;){const[C,D,L]=v,F=v.index;F>E&&b.push(g.slice(E,F)),b.push(e.jsx("span",{style:{color:D},children:L},F)),E=F+C.length}return E<g.length&&b.push(g.slice(E)),b};return e.jsxs("div",{className:"w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 lg:text-xl text-blue-100 pl-1 font-semibold",children:"Main Title:"}),e.jsx("div",{className:"my-3 p-3 border-2 border-gray-400 rounded-md bg-gray-700 text-lg min-h-[120px] select-none cursor-default",children:A(h)}),e.jsx("textarea",{ref:w,rows:4,value:h,onChange:T,className:"w-full text-base p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black min-h-[10px]"}),e.jsxs("p",{className:`text-sm mt-1 ${h.length>s?"text-red-500":"text-blue-300"}`,children:[h.length,"/",s]}),e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[e.jsx("input",{type:"color",value:m,onChange:g=>y(g.target.value),title:"Vyber farbu",className:"w-10 h-10 p-0 border-0 cursor-pointer"}),e.jsx("button",{onClick:()=>o(h,p,w,!0),className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-600 transition",children:"Change Color"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 lg:text-xl text-blue-100 pl-1 font-semibold",children:"Intro Text:"}),e.jsx("div",{className:"my-3 p-3 border-2 border-gray-400 rounded-md bg-gray-700 text-base min-h-[160px] select-none cursor-default",children:A(i)}),e.jsx("textarea",{ref:k,rows:4,value:i,onChange:x,className:"w-full text-base p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-black min-h-[120px]"}),e.jsxs("p",{className:`text-sm mt-1 ${i.length>c?"text-red-500":"text-blue-300"}`,children:[i.length,"/",c]}),e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[e.jsx("input",{type:"color",value:m,onChange:g=>y(g.target.value),title:"Vyber farbu",className:"w-10 h-10 p-0 border-0 cursor-pointer"}),e.jsx("button",{onClick:()=>o(i,f,k,!1),className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-600 transition",children:"Change Color"})]})]}),e.jsxs("div",{className:"text-center pb-5 pt-2 space-y-2",children:[e.jsx("button",{onClick:S,className:"px-8 py-3 font-semibold text-lg bg-green-700 hover:bg-green-600 text-white rounded-md transition",children:"Save Text"}),e.jsxs("div",{className:`min-h-[5px] text-sm font-medium transition-all duration-300 ${d==="success"?"text-green-400":d==="error"?"text-red-400":"text-transparent"}`,children:[j||"‚Ä¢"," "]})]})]})},I={football:["jersey","ball","cleats","shinguards"],hockey:["jersey","sticks","skates","helmets"],cycling:["clothes","bike","helmets","gloves"]},G=()=>{const[a,u]=l.useState({name:"",category:"",brand:"",price:"",type:"",description:"",slug:"",carousel_group:""}),[n,h]=l.useState(null),[p,i]=l.useState(!1),[f,m]=l.useState(null),[y,j]=l.useState(null),[r,d]=l.useState(null),N=s=>s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),w=s=>{const{name:c,value:T}=s.target,x={...a,[c]:T,...c==="name"?{slug:N(T)}:{},...c==="category"?{type:""}:{}};(c==="category"||c==="type")&&x.category&&x.type&&(x.carousel_group=`${x.category}_${x.type}`),u(x)},k=s=>{h(s.target.files[0])},o=async s=>{var E,v;s.preventDefault(),d(null);const{name:c,category:T,brand:x,price:S,type:P,description:A,slug:g}=a,t=[];if(c||t.push("name"),T||t.push("category"),x||t.push("brand"),S||t.push("price"),P||t.push("type"),A||t.push("description"),g||t.push("slug"),t.length>0){j("Please fill in all required fields."),m(null);return}if(!n){j(null),d("Please upload an image before saving the product."),m(null);return}const b=new FormData;Object.entries(a).forEach(([C,D])=>{C==="carousel_group"&&!p||b.append(C,D)}),b.append("image",n);try{const C=localStorage.getItem("token"),D=await _.post("/products",b,{headers:{Authorization:`Bearer ${C}`,"Content-Type":"multipart/form-data"}});m(D.data.message),j(null),d(null),u({name:"",category:"",brand:"",price:"",type:"",description:"",slug:"",carousel_group:""}),h(null),i(!1)}catch(C){j(((v=(E=C.response)==null?void 0:E.data)==null?void 0:v.error)||"An error occurred"),m(null)}};return e.jsxs("div",{className:"bg-black bg-opacity-70  md:rounded-xl py-10 px-4 text-white border border-gray-700",children:[e.jsx("h3",{className:"text-xl md:text-2xl lg:text-3xl font-semibold mb-8 text-center text-blue-200",children:"Add New Product"}),e.jsxs("ul",{className:"text-sm lg:text-[16px] text-gray-100 mb-6 space-y-2 mx-auto lg:max-w-3xl px-2 pb-3",children:[e.jsxs("li",{children:[e.jsx("strong",{className:"text-blue-200",children:"Name:"})," Enter the full product name."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-blue-200",children:"Brand:"})," Must exactly match an existing brand. This ensures the product appears correctly in brand sections."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-blue-200",children:"Price:"})," Enter the price (e.g., ",e.jsx("code",{children:"49.90"}),")."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-blue-200",children:"Description:"})," Provide detailed information about the product (features, materials, etc.)."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-blue-200",children:"Category & Type:"})," Select the sport category (football, hockey, cycling) and then the appropriate product type (ball, jersey, helmet). These two fields determine where the product will appear on the site and how it will be filtered in different sections."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-blue-200",children:"Carousel Group:"})," Optional. If checked, the product will appear in the main carousel of its sport category. It uses both ",e.jsx("code",{children:"category"})," and ",e.jsx("code",{children:"type"})," to determine placement."]}),e.jsxs("li",{children:[e.jsx("strong",{className:"text-blue-200",children:"Upload Image:"})," Upload a product image from your local drive. Recommended: clear, front-facing image."]})]}),e.jsxs("form",{onSubmit:o,className:"max-w-4xl mx-auto bg-gray-800 xl:border-2 border-gray-500 bg-opacity-50 p-8 rounded-lg shadow-md",encType:"multipart/form-data",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:["name","brand","price","description"].map(s=>e.jsxs("div",{children:[e.jsxs("label",{className:"block font-semibold mb-1",children:[s.replace("_"," ").replace(/\b\w/g,c=>c.toUpperCase()),e.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),s==="description"?e.jsx("textarea",{name:s,value:a[s],onChange:w,rows:"3",placeholder:"Enter a detailed product description",className:"w-full p-2 bg-blue-100 text-black border border-blue-800 rounded outline-none",required:!0}):e.jsx("input",{type:s==="price"?"number":"text",name:s,value:a[s],onChange:w,min:s==="price"?"0":void 0,step:s==="price"?"0.01":void 0,placeholder:s==="name"?"Enter product name":s==="brand"?"Enter brand":s==="price"?"Enter price in ‚Ç¨":"",className:"w-full p-2 bg-blue-100 text-black border border-blue-800 rounded outline-none",required:!0})]},s))}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block font-semibold mb-1",children:["Category",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{name:"category",value:a.category,onChange:w,className:"w-full p-2 bg-blue-100 text-black border border-blue-800 rounded",required:!0,children:[e.jsx("option",{value:"",children:"-- Select Category --"}),Object.keys(I).map(s=>e.jsx("option",{value:s,children:s[0].toUpperCase()+s.slice(1)},s))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block font-semibold mb-1",children:["Type",e.jsx("span",{className:"text-red-400",children:"*"})]}),e.jsxs("select",{name:"type",value:a.type,onChange:w,className:"w-full p-2 bg-blue-100 text-black border border-blue-800 rounded",required:!0,disabled:!a.category,children:[e.jsx("option",{value:"",children:"-- Select Type --"}),a.category&&I[a.category].map(s=>e.jsx("option",{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6 mt-6",children:[e.jsxs("div",{className:"md:w-1/2 px-2",children:[e.jsx("label",{className:"block font-semibold mb-1",children:"Carousel Group"}),e.jsx("input",{type:"text",name:"carousel_group",value:a.carousel_group,readOnly:!0,disabled:!0,className:"w-full p-2 bg-gray-300 text-black border border-blue-800 rounded outline-none cursor-not-allowed"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"includeCarouselGroup",checked:p,onChange:()=>i(!p),className:"accent-green-500 w-6 h-6"}),e.jsxs("label",{htmlFor:"includeCarouselGroup",className:"text-[16px] text-blue-100",children:["Include ",e.jsx("code",{children:"carousel_group"})," in product"]})]})]}),e.jsxs("div",{className:"md:w-1/2 min-h-56 md:min-h-36 px-2 bg-gray-700 p-3 bg-opacity-70 rounded-lg",children:[e.jsxs("label",{className:"block font-semibold mb-1 text-center md:text-left",children:["Image",e.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 text-center md:text-left",children:[e.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[e.jsx("label",{htmlFor:"file-upload",className:"cursor-pointer bg-blue-700 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition",children:"Upload Image"}),n&&e.jsx("span",{className:"text-sm text-green-200 mt-2 md:mt-1",children:n.name})]}),n&&e.jsx("img",{src:URL.createObjectURL(n),alt:"Preview",className:"w-20 h-20 border rounded mx-auto md:mx-0"})]}),e.jsx("input",{id:"file-upload",type:"file",accept:"image/*",onChange:k,className:"hidden"})]})]}),e.jsx("div",{className:"flex justify-center mt-8",children:e.jsx("button",{type:"submit",className:"w-[190px] bg-green-700 hover:bg-green-600 text-white py-2 px-4 text-sm md:text-lg rounded-lg transition",children:"Add Product"})}),e.jsxs("div",{className:"mt-4 h-6 md:h-8 flex justify-center items-center",children:[f&&e.jsx("p",{className:"text-green-400 font-medium text-center",children:f}),y&&e.jsx("p",{className:"text-red-400 font-medium text-center",children:y}),r&&e.jsx("p",{className:"text-red-400 font-medium text-center",children:r})]})]})]})},K=()=>{const[a,u]=l.useState([]),[n,h]=l.useState([]),[p,i]=l.useState(""),[f,m]=l.useState(null),[y,j]=l.useState(""),[r,d]=l.useState(!0),[N,w]=l.useState(!1),[k,o]=l.useState(null);l.useEffect(()=>{(async()=>{try{const S=await _.get("/products/all");u(S.data),h(S.data)}catch{j("Chyba pri naƒç√≠tavan√≠ produktov")}d(!1)})()},[]),l.useEffect(()=>{if(y){const x=setTimeout(()=>{j("")},3e3);return()=>clearTimeout(x)}},[y]);const s=x=>{const S=x.target.value;i(S),m(null);const P=a.filter(A=>A.name.toLowerCase().includes(S.toLowerCase())||A.slug.toLowerCase().includes(S.toLowerCase()));h(P)},c=()=>{if(!f){j("Najprv vyber produkt, ktor√Ω chce≈° vymaza≈•.");return}o(f),w(!0)},T=async()=>{try{const x=localStorage.getItem("token");await _.delete(`/products/${k}`,{headers:{Authorization:`Bearer ${x}`}});const S=a.filter(P=>P.slug!==k);u(S),h(S),m(null),j("The product was successfully deleted.")}catch{j("Error deleting the product.")}finally{w(!1),o(null)}};return e.jsxs("div",{className:"w-full mx-auto p-6 bg-black bg-opacity-70 text-white md:rounded-xl border border-gray-700",children:[e.jsx("h2",{className:"text-xl pb-5 md:text-2xl lg:text-3xl font-semibold mb-4 text-center text-blue-200",children:"Search and Delete Product"}),e.jsx("input",{type:"text",placeholder:"Enter product name",value:p,onChange:s,className:"block w-full max-w-3xl px-4 py-2 rounded-lg bg-gray-900 text-white text-center placeholder-gray-400 border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-400 mb-4 mx-auto"}),e.jsx("div",{className:"h-[400px] max-w-3xl mx-auto overflow-y-auto scrollbar scrollbar-thumb-gray-500 scrollbar-track-gray-800 rounded-lg border-2 border-gray-300",children:e.jsx("ul",{className:"divide-y divide-gray-700",children:n.map(x=>e.jsxs("li",{className:`p-4 transition cursor-pointer hover:bg-gray-800 ${f===x.slug?"bg-red-900 text-white":""}`,onClick:()=>m(x.slug),children:[e.jsx("p",{className:"text-lg font-medium",children:x.name}),e.jsxs("p",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"text-gray-200",children:"Brand:"})," ",x.brand," ",e.jsx("span",{className:"text-gray-200",children:"| Category:"})," ",x.category," ",e.jsx("span",{className:"text-gray-100",children:"| Type:"})," ",x.type]})]},x.slug))})}),e.jsxs("div",{className:"flex flex-col justify-center mt-6",children:[e.jsx("button",{onClick:c,className:"w-[190px] bg-red-700 hover:bg-red-600 text-white py-2 px-4 text-sm md:text-lg rounded-lg transition mx-auto",disabled:!f,children:"Delete Product"}),e.jsxs("div",{className:"min-h-[24px] mt-2 flex items-center justify-center",children:[y&&e.jsx("p",{className:"text-green-400 text-center",children:y}),r&&e.jsx("p",{className:"text-blue-300 text-center",children:"Loading products..."})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg shadow-lg border border-gray-500 max-w-md w-full",children:[e.jsx("h3",{className:"text-xl text-white font-semibold mb-4 text-center",children:"Do you really want to delete this product?"}),e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx("button",{onClick:T,className:"bg-red-700 hover:bg-red-600 text-white px-4 py-2 rounded-lg",children:"Delete"}),e.jsx("button",{onClick:()=>{w(!1),o(null)},className:"bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Cancel"})]})]})})]})},V=()=>{const[a,u]=l.useState([]),[n,h]=l.useState(!0),[p,i]=l.useState(""),[f,m]=l.useState("");l.useEffect(()=>{(async()=>{try{const d=await _.get("/api/orders/admin",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});u(d.data)}catch(d){console.error("Chyba pri naƒç√≠tan√≠ objedn√°vok:",d),i("Nepodarilo sa naƒç√≠ta≈• objedn√°vky.")}finally{h(!1)}})()},[]);const y=f.toLowerCase().split(" ").filter(Boolean),j=a.filter(r=>y.every(d=>(r.order_number||"").toLowerCase().includes(d)||(r.user_email||"").toLowerCase().includes(d)));return e.jsxs("div",{className:"bg-black bg-opacity-70 md:rounded-xl p-5 border border-gray-700",children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-semibold text-center text-blue-200 mb-4",children:"All Orders"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("input",{type:"text",placeholder:"Search by order number or email...",value:f,onChange:r=>m(r.target.value),className:"w-full md:w-[50%] px-4 py-2 rounded-lg bg-gray-900 text-white text-center placeholder-gray-400 border-2 border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-300"})}),e.jsxs("div",{className:"rounded-lg shadow-lg max-h-[650px] xl:max-h-[900px] mb-10 overflow-y-scroll scrollbar scrollbar-thumb-gray-500 scrollbar-track-gray-800 max-w-5xl mx-auto mt-10",children:[n&&e.jsx("p",{className:"text-blue-400 text-center",children:"Naƒç√≠tavam objedn√°vky..."}),p&&e.jsx("p",{className:"text-red-400 text-center",children:p}),j.length>0?e.jsx("div",{className:"space-y-7 md:px-10",children:j.map(r=>{const d=r.items.reduce((o,s)=>o+s.quantity*parseFloat(s.item_price),0),N=parseFloat(r.delivery_price),w=r.used_points*.1,k=d+N-w;return e.jsxs("div",{className:"border border-blue-100 rounded-xl p-6 shadow-sm bg-gray-900 text-white",children:[e.jsxs("div",{className:"text-xl font-bold text-blue-300 text-center mt-2 md:mt-0",children:["Order No. ",r.order_number]}),e.jsx("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-2",children:e.jsxs("div",{className:"text-sm text-center text-blue-100 mt-2",children:[new Date(r.created_at).toLocaleDateString("sk-SK")," ",new Date(r.created_at).toLocaleTimeString("sk-SK",{hour:"2-digit",minute:"2-digit"})]})}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:gap-10",children:[e.jsxs("div",{className:"flex-1 space-y-2 mb-6 md:mb-0",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-blue-200",children:"User email:"})," ",r.user_email]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-blue-200",children:"Full name:"})," ",r.full_name]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-blue-200",children:"Profile email:"})," ",r.profile_email]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-blue-200",children:"Address:"})," ",r.address,", ",r.city," ",r.postal_code]}),e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-blue-200",children:"Payment method:"})," ",r.payment_method]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-blue-200",children:"Used points:"})," ",r.used_points]})]})]}),e.jsx("div",{className:"flex-1",children:r.items&&r.items.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold mb-2 text-blue-200",children:"Products:"}),e.jsx("ul",{className:"list-none list-inside space-y-1 text-sm md:text-md",children:r.items.map((o,s)=>{const c=parseFloat(o.item_price),T=o.quantity*c;return e.jsxs("li",{children:[o.product_name," ‚Äì ",o.quantity,"√ó",c.toFixed(2)," ‚Ç¨ = ",T.toFixed(2)," ‚Ç¨"]},s)})}),e.jsxs("div",{className:"mt-4 space-y-1 text-right",children:[e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-200",children:"Subtotal: "}),d.toFixed(2)," ‚Ç¨"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-200",children:"+ Shipping: "}),r.delivery_method," (",N.toFixed(2)," ‚Ç¨)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-blue-200",children:"- Used points: "}),"-",r.used_points," (",w.toFixed(2)," ‚Ç¨)"]}),e.jsx("hr",{className:"my-1 border-gray-600"}),e.jsxs("p",{className:"text-green-400 text-xl font-bold",children:["Final Price: ",k.toFixed(2)," ‚Ç¨"]})]})]})})]})]},r.id)})}):!n&&e.jsx("p",{className:"text-center text-lg text-red-500",children:"No orders found."})]})]})};function X(){const[a,u]=l.useState({title:"",paragraph:""}),[n,h]=l.useState({title:"",paragraph:""}),[p,i]=l.useState({title:"",paragraph:""});return e.jsxs("div",{className:"relative min-h-screen text-white bg-fixed bg-cover bg-no-repeat bg-center pb-12 md:px-8",style:{backgroundImage:"url('/img/bg-profile-1.jpg')"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50 z-0"}),e.jsxs("div",{className:"relative z-10 max-w-screen-2xl mx-auto space-y-10",children:[e.jsx("div",{className:"py-8 text-center bg-black w-full",children:e.jsxs("h1",{className:"text-2xl lg:text-4xl font-bold text-white",children:["Welcome to the ",e.jsx("span",{className:"text-blue-200",children:"Admin Panel"})]})}),e.jsxs("div",{className:"grid gap-5 grid-cols-1 lg:grid-cols-2 xl:grid-cols-6",children:[e.jsx("div",{className:"lg:col-span-1 xl:col-span-2 bg-black bg-opacity-70 md:rounded-xl p-5 shadow-lg border border-gray-700",children:e.jsx(B,{})}),e.jsxs("div",{className:"bg-black bg-opacity-60 md:bg-opacity-70 md:rounded-xl p-5 shadow-lg lg:col-span-1 xl:col-span-4 border border-gray-700",children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-semibold text-center text-blue-200 mb-4",children:"User List"}),e.jsx(z,{})]})]}),e.jsx("div",{className:"",children:e.jsx(V,{})}),e.jsx("div",{className:"",children:e.jsx(G,{})}),e.jsx("div",{className:"",children:e.jsx(K,{})}),e.jsx("div",{className:"bg-black bg-opacity-70 md:rounded-xl p-2 md:p-5 shadow-lg lg:col-span-2 xl:col-span-6 border border-gray-700",children:e.jsx(q,{})}),e.jsxs("section",{className:"bg-black bg-opacity-70 md:rounded-xl p-5 shadow-lg border border-gray-700",children:[e.jsx("h2",{className:"text-2xl lg:text-3xl font-semibold text-center text-blue-200 mb-8",children:"Edit Section Headers"}),e.jsx("div",{className:"flex justify-center mb-12",children:e.jsx("div",{className:"md:rounded-xl md:p-5 md:text-center max-w-[380px] md:max-w-3xl w-full",children:e.jsxs("p",{className:"text-sm md:text-base text-left max-w-[450px] mx-auto text-white",children:[e.jsx("strong",{className:"text-blue-200 text-sm md:text-lg text-center block mb-2",children:"üõ† Instructions for Editing the Title and Text"}),"1. Type or paste text into the field.",e.jsx("br",{}),"2. Select the part of the text you want to highlight with color.",e.jsx("br",{}),"3. Choose a color from the palette.",e.jsx("br",{}),"4. Click the ",e.jsx("em",{children:"‚ÄúChange Color‚Äù"})," button.",e.jsx("br",{}),"5. To change color, remove old tags and repeat.",e.jsx("br",{}),"6. Click the ",e.jsx("em",{children:"‚ÄúSave text‚Äù"})," button to save your changes."]})})}),e.jsxs("div",{className:"grid gap-8 grid-cols-1 xl:grid-cols-3",children:[e.jsxs("div",{className:"border-t-4 lg:border border-gray-600 md:rounded-xl md:p-5 shadow-lg md:bg-black md:bg-opacity-50",children:[e.jsx("h3",{className:"text-xl font-semibold text-center text-blue-200 mb-4",children:"Edit Football Section Title"}),e.jsx(U,{sectionKey:"football-home-header",onChange:u,initialText:a})]}),e.jsxs("div",{className:"border-t-4 lg:border border-gray-600 rounded-xl md:p-5 shadow-lg md:bg-black md:bg-opacity-50",children:[e.jsx("h3",{className:"text-xl font-semibold text-center text-blue-200 mb-4",children:"Edit Hockey Section Title"}),e.jsx(U,{sectionKey:"hockey-home-header",onChange:h,initialText:n})]}),e.jsxs("div",{className:"border-t-4 lg:border border-gray-600 rounded-xl md:p-5 shadow-lg md:bg-black md:bg-opacity-50",children:[e.jsx("h3",{className:"text-xl font-semibold text-center text-blue-200 mb-4",children:"Edit Cycling Section Title"}),e.jsx(U,{sectionKey:"cycling-home-header",onChange:i,initialText:p})]})]})]})]})]})}export{X as default};
