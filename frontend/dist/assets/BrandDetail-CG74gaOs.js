import{b as j,r,C as f,j as e}from"./index-Cg-pIFFT.js";import{P as y}from"./ProductsCarousel-C941Z2u0.js";import{P as w}from"./ProductSection-gAkjoKNH.js";import"./pagination-ChAglbSL.js";const C=()=>{const{slug:l}=j(),[a,x]=r.useState(null),[u,g]=r.useState([]),[d,m]=r.useState([]),{refreshCartCount:b}=r.useContext(f),[h,n]=r.useState("");r.useEffect(()=>{(async()=>{try{const t=await(await fetch("https://hoodshop-project.onrender.com/api/brands")).json();g(t)}catch(o){console.error("Chyba pri načítaní značiek:",o)}})()},[]),r.useEffect(()=>{(async()=>{try{const t=await(await fetch(`https://hoodshop-project.onrender.com/api/brands/${l}`)).json();if(x(t),t&&t.name){const i=await(await fetch(`https://hoodshop-project.onrender.com/products/brand/${t.name}`)).json();m(i)}else m([])}catch(o){console.error("Chyba pri načítaní:",o)}})()},[l]);const p=async s=>{const o=localStorage.getItem("sessionId"),t=localStorage.getItem("token");try{const c=await fetch("https://hoodshop-project.onrender.com/api/cart",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`},...!t&&o&&{"x-session-id":o}},body:JSON.stringify({productId:s.id,quantity:1})}),i=await c.json();c.ok?(n("Product added to cart!"),b(),setTimeout(()=>n(""),3e3)):(n("Failed to add to cart: "+i.message),setTimeout(()=>n(""),3e3))}catch(c){console.error("Error adding to cart:",c),n("Error adding to cart"),setTimeout(()=>n(""),3e3)}};return a?e.jsxs("section",{className:"bg-black",children:[e.jsxs("section",{className:"relative py-16 px-6 bg-black overflow-hidden",style:{backgroundImage:`url(https://hoodshop-project.onrender.com
${a.background_image||"/img/bg-default.jpg"})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"},children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-40 z-0"}),e.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-white text-center mb-16",children:[e.jsx("img",{src:`https://hoodshop-project.onrender.com
${a.brand_image}`,alt:a.name,className:"mx-auto h-40 object-contain mb-6 rounded-xl"}),e.jsx("h2",{className:"text-2xl xl:text-4xl font-semibold mb-6 italic",children:a.brand_info}),e.jsx("p",{className:"text-lg xl:text-2xl leading-relaxed text-blue-100",children:a.brand_text})]})]}),d.length>0&&e.jsxs("div",{className:"relative z-10 p-8 bg-black",children:[e.jsxs("h2",{className:"text-4xl font-semibold text-white mb-6 text-center bg-black",children:["Products by ",a.name]}),e.jsx(y,{slides:d,handleAddToCart:p})]}),e.jsxs("div",{className:"bg-white py-2 px-4 shadow-inner my-8",children:[e.jsx("h1",{className:"text-4xl font-semibold text-center py-5",children:"Our Brand Collection"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-4 xl:gap-8",children:u.map(s=>e.jsx("a",{href:`/brands/${s.name.toLowerCase()}`,children:e.jsx("img",{src:`https://hoodshop-project.onrender.com${s.brand_image}`,alt:s.name,className:"sm:h-10 w-[94px] lg:h-full object-contain transition-transform duration-300 hover:scale-110"})},s.id))})]}),e.jsx(w,{title:`Explore ${a.name} Products`,products:d,backgroundImage:`https://hoodshop-project.onrender.com
${a.background_image||"/img/bg-default.jpg"}`,onAddToCart:p}),h&&e.jsx("div",{className:"fixed top-16 right-6 bg-black text-green-400 px-6 py-3 rounded-lg shadow-lg z-50 text-lg font-semibold",children:h})]}):e.jsx("div",{className:"text-white text-center py-10",children:"Načítava sa..."})};export{C as default};
