import{b as f,r,C as j,j as t}from"./index-C-hwXzSE.js";import{P as y}from"./ProductsCarousel-BCx4eImW.js";import{P as w}from"./ProductSection-D6ovULBj.js";import"./pagination-B-wBfeim.js";const P=()=>{const{slug:d}=f(),[e,x]=r.useState(null),[u,p]=r.useState([]),[l,g]=r.useState([]),{refreshCartCount:b}=r.useContext(j),[h,n]=r.useState("");r.useEffect(()=>{(async()=>{try{const o=await(await fetch("http://localhost:3001/api/brands")).json();p(o)}catch(s){console.error("Chyba pri načítaní značiek:",s)}})()},[]),r.useEffect(()=>{(async()=>{try{const o=await(await fetch(`http://localhost:3001/api/brands/${d}`)).json();x(o);const i=await(await fetch(`http://localhost:3001/products/brand/${o.name}`)).json();g(i)}catch(s){console.error("Chyba pri načítaní:",s)}})()},[d]);const m=async a=>{const s=localStorage.getItem("sessionId"),o=localStorage.getItem("token");try{const c=await fetch("http://localhost:3001/api/cart",{method:"POST",headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`},...!o&&s&&{"x-session-id":s}},body:JSON.stringify({productId:a.id,quantity:1})}),i=await c.json();c.ok?(n("Product added to cart!"),b(),setTimeout(()=>n(""),3e3)):(n("Failed to add to cart: "+i.message),setTimeout(()=>n(""),3e3))}catch(c){console.error("Error adding to cart:",c),n("Error adding to cart"),setTimeout(()=>n(""),3e3)}};return e?t.jsxs("section",{className:"bg-black",children:[t.jsxs("section",{className:"relative py-16 px-6 bg-black overflow-hidden",style:{backgroundImage:`url(http://localhost:3001${e.background_image||"/img/bg-default.jpg"})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundAttachment:"fixed"},children:[t.jsx("div",{className:"absolute inset-0 bg-black opacity-40 z-0"}),t.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-white text-center mb-16",children:[t.jsx("img",{src:`http://localhost:3001${e.brand_image}`,alt:e.name,className:"mx-auto h-40 object-contain mb-6 rounded-xl"}),t.jsx("h2",{className:"text-2xl xl:text-4xl font-semibold mb-6 italic",children:e.brand_info}),t.jsx("p",{className:"text-lg xl:text-2xl leading-relaxed text-blue-100",children:e.brand_text})]})]}),l.length>0&&t.jsxs("div",{className:"relative z-10 p-8 bg-black",children:[t.jsxs("h2",{className:"text-4xl font-semibold text-white mb-6 text-center bg-black",children:["Products by ",e.name]}),t.jsx(y,{slides:l,handleAddToCart:m})]}),t.jsxs("div",{className:"bg-white py-2 px-4 shadow-inner my-8",children:[t.jsx("h1",{className:"text-4xl font-semibold text-center py-5",children:"Our Brand Collection"}),t.jsx("div",{className:"flex flex-wrap justify-center gap-2 sm:gap-4 xl:gap-8",children:u.map(a=>t.jsx("a",{href:`/brands/${a.name.toLowerCase()}`,children:t.jsx("img",{src:`http://localhost:3001${a.brand_image}`,alt:a.name,className:"sm:h-10 w-[94px] lg:h-full object-contain transition-transform duration-300 hover:scale-110"})},a.id))})]}),t.jsx(w,{title:`Explore ${e.name} Products`,products:l,backgroundImage:`http://localhost:3001${e.background_image||"/img/bg-default.jpg"}`,onAddToCart:m}),h&&t.jsx("div",{className:"fixed top-16 right-6 bg-black text-green-400 px-6 py-3 rounded-lg shadow-lg z-50 text-lg font-semibold",children:h})]}):t.jsx("div",{className:"text-white text-center py-10",children:"Načítava sa..."})};export{P as default};
